# 2D3D Profile Catalog Integration (S3-27)

## Source of truth
The 2D editor uses the **core-structural** profile catalog as the single source of truth. The catalog
is loaded via `ProfileCatalog` (core-structural) and exposed to the editor through the
`ProfileCatalogQuery` API (core-domain) with an implementation in core-data. This avoids duplicating
profile data while keeping the editor API stable and UI-friendly.

## Editor-facing API
`ProfileCatalogQuery` provides three operations:
- `listAll()` — return the full catalog as `ProfileItem` entries.
- `search(query, limit)` — filter the catalog by a normalized query.
- `lookup(profileRef)` — resolve a canonical profile reference to a `ProfileItem`.

All calls are cached in memory and dispatched off the main thread.

## profileRef canonical format
The canonical key is the normalized designation generated by the structural parser:
- `W310x39`
- `HSS 203x203x6.4`
- `C200x17`
- `L50x50x6`
- `PL 10x250`

### Normalization rules
`normalizeProfileRef(input)` performs deterministic normalization:
1. Trim leading/trailing whitespace.
2. Convert `×` to `x` and normalize decimal commas to dots.
3. Parse using the structural profile parser (supports W/HSS/C/L/PL).
4. Return the parser’s canonical designation, or `null` when unsupported.

This ensures `Member2D.profileRef` uses the same canonical key that the catalog expects.

## Ordering guarantees
Catalog ordering is deterministic:
1. Profile type order: **W → HSS → C → L → PL**
2. `profileRef` ascending within each type.

Search results preserve the same ordering after filtering and apply the requested `limit`.
